execute_process(COMMAND "@GIT_EXECUTABLE@" describe --dirty --tags --always
  WORKING_DIRECTORY "@CMAKE_SOURCE_DIR@"
  OUTPUT_VARIABLE GIT_DESCRIPTION
  ERROR_QUIET OUTPUT_STRIP_TRAILING_WHITESPACE)
execute_process(COMMAND "@GIT_EXECUTABLE@" describe --match=NeVeRmAtCh --always --abbrev=40 --dirty
  WORKING_DIRECTORY "@CMAKE_SOURCE_DIR@"
  OUTPUT_VARIABLE GIT_SHA1
  ERROR_QUIET OUTPUT_STRIP_TRAILING_WHITESPACE)

if (DEFINED GIT_DESCRIPTION)
    string (REGEX MATCHALL "[0-9]+" _versionComponents "${GIT_DESCRIPTION}")
    list (LENGTH _versionComponents _len)
    if (${_len} GREATER 0)
        list(GET _versionComponents 0 VERSION_MAJOR)
    endif()
    if (${_len} GREATER 1)
        list(GET _versionComponents 1 VERSION_MINOR)
    endif()
    if (${_len} GREATER 2)
        list(GET _versionComponents 2 VERSION_PATCH)
    endif()
    string(REGEX MATCHALL "dirty" DIRTY "${GIT_DESCRIPTION}")
    if (NOT "${DIRTY}" STREQUAL "")
        set(VERSION_PATCH "${VERSION_PATCH}-dirty")
    endif()
endif()
set(BUILD_TYPE @CMAKE_BUILD_TYPE@)
configure_file(@CMAKE_SOURCE_DIR@/version.cpp.in @CMAKE_BINARY_DIR@/version.cpp @ONLY)
